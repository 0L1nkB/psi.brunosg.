<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conceituação Esquema + IA | Caderno Incrível</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Paleta Esquema */
            --bg-color: #f0f8ff;
            --paper: #ffffff;
            --child: #ffaf40; /* Criança (Laranja) */
            --parent: #ff5252; /* Pais (Vermelho) */
            --coping: #70a1ff; /* Enfrentamento (Azul) */
            --adult: #33d9b2; /* Adulto (Verde) */
            --text: #2d3436;
            --ai-btn: #a29bfe; /* Cor do botão IA */
            --shadow: rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dfe6e9 2px, transparent 2px);
            background-size: 20px 20px;
            margin: 0; padding: 20px; color: var(--text);
            display: flex; justify-content: center;
        }

        .container {
            width: 100%; max-width: 1100px;
            background: var(--paper); padding: 40px;
            border-radius: 25px; box-shadow: 10px 10px 0 var(--shadow);
            border: 3px solid var(--text); position: relative;
        }

        /* CONFIGURAÇÃO IA */
        .ai-settings {
            position: absolute; top: 20px; right: 20px;
        }
        .btn-config {
            background: #2d3436; color: white; border: none; padding: 8px 15px;
            border-radius: 20px; cursor: pointer; font-size: 0.9rem; font-family: inherit;
            display: flex; align-items: center; gap: 5px;
        }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; background: #ff7675; }
        .status-dot.active { background: #55efc4; box-shadow: 0 0 8px #55efc4; }

        /* HEADER */
        header { text-align: center; margin-bottom: 40px; }
        h1 { margin: 0; color: #40407a; font-size: 2.2rem; text-transform: uppercase; }
        .info-inputs { margin-top: 15px; display: flex; justify-content: center; gap: 20px; }
        .info-field {
            border: none; border-bottom: 2px dashed #ccc; background: transparent;
            padding: 5px; font-family: inherit; font-size: 1rem; width: 200px; text-align: center;
        }

        /* SEÇÕES */
        .section-box {
            border: 2px dashed #b2bec3; border-radius: 15px; padding: 20px;
            margin-bottom: 30px; background: #fff; position: relative;
        }
        .sec-title {
            font-size: 1.2rem; font-weight: 800; color: #2c2c54; text-transform: uppercase;
            margin-bottom: 15px; display: flex; align-items: center; gap: 10px;
        }

        /* TAGS (NECESSIDADES/ESQUEMAS) */
        .tags-container { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; }
        .tag {
            padding: 6px 12px; border: 1px solid #ccc; border-radius: 20px; font-size: 0.85rem;
            cursor: pointer; background: white; transition: 0.2s; user-select: none;
        }
        .tag:hover { border-color: var(--child); }
        .tag.selected { background: var(--child); color: white; border-color: var(--child); font-weight: bold; }
        .tag span { outline: none; } /* Editável */

        /* INPUT WRAPPER E TEXTAREA */
        .input-wrapper { position: relative; width: 100%; margin-top: 10px; }
        
        textarea {
            width: 100%; border: none; background: rgba(240,240,240,0.5); border-bottom: 2px dashed #ccc;
            font-family: inherit; font-size: 1rem; resize: vertical; padding: 10px; padding-bottom: 40px;
            min-height: 80px; border-radius: 10px; box-sizing: border-box;
        }
        textarea:focus { outline: none; border-bottom-color: #40407a; background: #fff; }

        /* BOTÃO MÁGICO (IA) */
        .btn-magic {
            position: absolute; bottom: 10px; right: 10px;
            background: var(--ai-btn); color: white; border: none;
            width: 30px; height: 30px; border-radius: 50%;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: 0.3s; opacity: 0.7;
        }
        .btn-magic:hover { opacity: 1; transform: scale(1.1) rotate(15deg); background: var(--primary); }
        .btn-magic.loading { animation: pulse 1s infinite; cursor: wait; background: #b2bec3; }
        @keyframes pulse { 0% {transform: scale(0.9);} 50% {transform: scale(1.1);} 100% {transform: scale(0.9);} }

        /* MODOS GRID */
        .modes-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        
        .mode-card {
            padding: 20px; border-radius: 15px; border: 3px solid; position: relative;
            background: rgba(255,255,255,0.9);
        }
        .child { border-color: var(--child); background: #fff8e1; }
        .parent { border-color: var(--parent); background: #ffebee; }
        .coping { border-color: var(--coping); background: #e3f2fd; }
        .adult { border-color: var(--adult); background: #e0f2f1; grid-column: span 2; }

        .card-header { font-weight: 800; text-transform: uppercase; margin-bottom: 5px; display: flex; justify-content: space-between; font-size: 0.9rem; }
        .card-desc { font-size: 0.8rem; color: #666; margin-bottom: 5px; font-style: italic; }

        /* RODAPÉ */
        .action-bar { position: fixed; bottom: 20px; right: 20px; display: flex; gap: 10px; }
        .btn-float {
            border: none; width: 50px; height: 50px; border-radius: 50%; color: white; font-size: 1.2rem;
            cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;
            transition: 0.2s;
        }
        .btn-float:hover { transform: translateY(-3px); }
        .btn-print { background: #2d3436; }
        .btn-clear { background: #d63031; }

        #save-status { position: fixed; bottom: 80px; right: 30px; color: #00b894; font-weight: bold; opacity: 0; transition: opacity 0.5s; }

        @media print {
            .ai-settings, .action-bar, .btn-magic { display: none !important; }
            .container { box-shadow: none; border: none; padding: 0; }
            .tag { border: 1px solid #aaa; }
            .tag.selected { background: #ddd !important; color: black

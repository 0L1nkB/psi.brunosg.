<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YSQ-S3 | Caderno de Esquemas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Paleta L√∫dica */
            --bg-color: #f0f8ff;
            --paper: #ffffff;
            --primary: #6c5ce7; /* Roxo */
            --secondary: #00b894; /* Verde */
            --accent: #fdcb6e; /* Amarelo */
            --text: #2d3436;
            --high-risk: #ff7675; /* Vermelho para esquemas altos */
            --shadow: rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dfe6e9 2px, transparent 2px);
            background-size: 20px 20px;
            margin: 0;
            padding: 20px;
            color: var(--text);
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: var(--paper);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 10px 10px 0 var(--shadow);
            border: 3px solid var(--text);
            position: relative;
        }

        /* CABE√áALHO */
        header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        /* Fita Decorativa */
        header::before {
            content: ""; position: absolute; top: -55px; left: 50%; transform: translateX(-50%) rotate(-1deg);
            width: 250px; height: 45px; background-color: rgba(108, 92, 231, 0.8);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        h1 { margin: 0; color: var(--primary); font-size: 2rem; text-transform: uppercase; }
        .subtitle { font-size: 1.1rem; color: #636e72; font-weight: bold; margin-bottom: 10px; }
        
        .instruction-box {
            background: #fffce0;
            padding: 15px;
            border-radius: 15px;
            border: 2px dashed var(--accent);
            font-size: 0.95rem;
            color: #555;
            margin-bottom: 30px;
        }

        /* CART√ÉO DE PERGUNTA */
        .question-card {
            background: #fff;
            margin-bottom: 20px;
            padding: 25px 20px 20px 25px;
            border-radius: 15px;
            border: 2px dashed #b2bec3;
            transition: all 0.2s;
            position: relative;
        }

        .question-card:hover { border-color: var(--primary); background-color: #f8f9fa; }

        .q-number {
            position: absolute; top: -12px; left: -12px;
            background: var(--accent); color: var(--text);
            width: 35px; height: 35px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; border: 2px solid var(--text);
            box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        .q-text { font-size: 1.1rem; font-weight: bold; margin-bottom: 15px; line-height: 1.4; }

        /* ESCALA 1-6 */
        .scale-container {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .scale-btn {
            flex: 1;
            min-width: 40px;
            padding: 10px 5px;
            border: 1px solid #dfe6e9;
            background: #f1f2f6;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            color: #636e72;
            text-align: center;
            transition: 0.2s;
            font-size: 0.9rem;
        }

        .scale-btn:hover { background: #dfe6e9; border-color: #b2bec3; }

        /* Bot√£o Selecionado */
        .scale-btn.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 0 #4834d4;
        }

        /* BOT√ÉO CALCULAR */
        .btn-action {
            display: block; width: 100%;
            margin-top: 40px; padding: 15px;
            background-color: var(--secondary); color: white;
            border: none; border-radius: 50px;
            font-size: 1.3rem; font-weight: bold; font-family: inherit;
            cursor: pointer; box-shadow: 0 6px 0 #0097e6;
            transition: transform 0.1s;
        }
        .btn-action:hover { transform: translateY(-3px); }
        .btn-action:active { transform: translateY(3px); box-shadow: none; }

        /* √ÅREA DE RESULTADOS */
        .result-section {
            display: none;
            margin-top: 50px;
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            border: 3px solid var(--text);
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        }

        .schema-row { margin-bottom: 15px; }
        .schema-header { display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 5px; font-size: 0.9rem; }
        
        .progress-bg {
            background: #eee; height: 12px; border-radius: 10px; overflow: hidden;
        }
        
        .progress-bar {
            height: 100%; background: var(--secondary); width: 0%; transition: width 1s ease; border-radius: 10px;
        }

        /* Cor de alerta para pontua√ß√£o alta */
        .high-score .progress-bar { background: var(--high-risk); }
        .high-score .schema-header { color: #d63031; }

        @media print {
            body { background: white; padding: 0; }
            .container { box-shadow: none; border: none; width: 100%; }
            .btn-action { display: none; }
            .question-card { break-inside: avoid; border: 1px solid #ccc; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>YSQ - S3</h1>
            <div class="subtitle">Question√°rio de Esquemas de Young</div>
        </header>

        <div class="instruction-box">
            <i class="fa-solid fa-circle-info"></i> <strong>Como responder:</strong><br>
            Leia cada frase e d√™ uma nota de <strong>1 a 6</strong> conforme ela descreve voc√™.<br>
            <strong>1</strong> = Completamente falso<br>
            <strong>6</strong> = Descreve-me perfeitamente
        </div>

        <form id="ysq-form">
            <div id="questions-container"></div>
        </form>

        <button class="btn-action" type="button" onclick="calculateResults()">
            <i class="fa-solid fa-wand-magic-sparkles"></i> CALCULAR MEUS ESQUEMAS
        </button>

        <div class="result-section" id="result-area">
            <h2 style="text-align: center; color: var(--text); margin-bottom: 20px;">üìä Mapa de Esquemas</h2>
            <p style="text-align:center; font-size:0.9rem; color:#666; margin-bottom:30px;">
                Barras <span style="color:#ff7675; font-weight:bold;">Vermelhas</span> indicam esquemas que podem estar mais ativos.
            </p>
            <div id="charts-container"></div>
            
            <button class="btn-action" style="background:var(--text); margin-top:30px;" onclick="window.print()">
                <i class="fa-solid fa-print"></i> SALVAR RELAT√ìRIO (PDF)
            </button>
        </div>
    </div>

    <script>
        // LISTA COMPLETA DAS 90 PERGUNTAS (Extra√≠das do PDF)
        const questionsList = [
            "N√£o tenho tido ningu√©m que cuide de mim, que partilhe comigo a sua vida ou que se preocupe realmente com tudo o que me acontece.",
            "Costumo apegar-me demasiadamente √†s pessoas que me s√£o mais pr√≥ximas porque tenho medo que elas me abandonem.",
            "Sinto que as pessoas v√£o se aproveitar de mim.",
            "Sou um(a) desajustado(a).",
            "Nenhum homem/mulher de quem eu goste pode gostar de mim depois de conhecer os meus defeitos ou fraquezas.",
            "Quase nada do que fa√ßo no trabalho (ou na escola) √© t√£o bom como o que os outros s√£o capazes de fazer.",
            "N√£o me sinto capaz de me virar sozinho(a) no dia-a-dia.",
            "N√£o consigo deixar de sentir que alguma coisa de mal est√° para acontecer.",
            "N√£o tenho sido capaz de me separar dos meus pais, tal como fazem as outras pessoas da minha idade.",
            "Sinto que, se fizer o que quero, s√≥ vou arranjar problemas.",
            "Sou sempre eu que acabo por tomar conta das pessoas que me s√£o mais chegadas.",
            "Sou demasiado controlado(a) para revelar os meus sentimentos positivos aos outros (por ex., afecto, mostrar que me preocupo).",
            "Tenho que ser o(a) melhor em quase tudo o que fa√ßo; n√£o aceito ficar em segundo lugar.",
            "Tenho muita dificuldade em aceitar um \"n√£o\" por resposta quando quero alguma coisa dos outros.",
            "N√£o sou capaz de me for√ßar a ter disciplina suficiente para cumprir tarefas rotineiras ou entendiantes.",
            "Ter dinheiro e conhecer pessoas importantes faz-me sentir uma pessoa com valor.",
            "Mesmo quando as coisas parecem estar a correr bem, sinto que isso √© apenas tempor√°rio.",
            "Se cometer um erro, mere√ßo ser castigado.",
            "N√£o tenho pessoas que me d√™m carinho, apoio e afeto.",
            "Preciso tanto dos outros que me preocupo com o facto de os poder perder.",
            "Sinto que tenho sempre que me defender na presen√ßa dos outros, caso contr√°rio eles me magoar√£o intencionalmente.",
            "Sou fundamentalmente diferente dos outros.",
            "Ningu√©m que me agrade gostaria de ficar comigo depois de me conhecer tal como eu sou na realidade.",
            "Sou um(a) incompetente quando se trata de atingir objetivos ou cumprir uma tarefa no trabalho (ou na escola).",
            "Considero-me uma pessoa dependente relativamente ao que tenho que fazer no dia-a-dia.",
            "Sinto que uma desgra√ßa (natural, criminal, financeira ou m√©dica) pode atingir-me a qualquer momento.",
            "Eu e os meus pais temos tend√™ncia a envolvermo-nos demasiado na vida e nos problemas uns dos outros.",
            "Sinto que n√£o tenho outro rem√©dio sen√£o ceder √† vontade dos outros, caso contr√°rio, eles ir√£o retaliar, zangar-se ou rejeitar-me de alguma maneira.",
            "Sou uma boa pessoa porque penso mais nos outros do que em mim.",
            "Considero embara√ßoso exprimir os meus sentimentos aos outros.",
            "Esfor√ßo-me por fazer o melhor; n√£o me contento com ser suficientemente bom.",
            "Sou especial e n√£o devia ser obrigado(a) a aceitar muitas das restri√ß√µes ou limita√ß√µes que s√£o impostas aos outros.",
            "Se n√£o consigo atingir um objetivo, fico facilmente frustrado(a) e desisto.",
            "Aquilo que consigo alcan√ßar tem mais valor para mim se for algo em que os outros reparem.",
            "Se algo de bom acontecer, preocupa-me que esteja para acontecer algo de mau a seguir.",
            "Se n√£o me esfor√ßar ao m√°ximo, √© de esperar que as coisas corram mal.",
            "Tenho sentido que n√£o sou uma pessoa especial para ningu√©m.",
            "Preocupa-me que as pessoas a que estou ligado(a) me deixem ou me abandonem.",
            "Mais tarde ou mais cedo, acabarei por ser traido(a) por algu√©m.",
            "Sinto que n√£o perten√ßo a grupo nenhum; sou um solit√°rio.",
            "N√£o tenho valor suficiente para merecer o amor, a aten√ß√£o e o respeito dos outros.",
            "A maioria das pessoas tem mais capacidades do que eu no que diz respeito ao trabalho (ou √† escola).",
            "Tenho falta de bom senso.",
            "Preocupa-me poder ser fisicamente agredido por algu√©m.",
            "√â muito dif√≠cil, para mim e para os meus pais, termos segredos intimos que n√£o contamos uns aos outros, sem nos sentirmos tra√≠dos ou culpados por isso.",
            "Nas minhas rela√ß√µes com os outros deixo que eles me dominem.",
            "Estou t√£o ocupado(a) a fazer coisas para as pessoas de quem gosto que tenho pouco tempo para mim.",
            "Para mim √© dif√≠cil ser caloroso(a) e espont√¢neo(a) com os outros.",
            "Devo de estar √† altura de todas as minhas responsabilidades e fun√ß√µes.",
            "Detesto ser reprimido(a) ou impedido(a) de fazer o que quero.",
            "Tenho muita dificuldade em abdicar de uma recompensa ou prazer imediato, a favor de um objectivo a longo prazo.",
            "Sinto-me pouco importante, a n√£o ser que receba muita aten√ß√£o dos outros.",
            "Todo o cuidado √© pouco; quase sempre alguma coisa corre mal.",
            "Se n√£o fizer bem o que me compete, mere√ßo sofrer as consequ√™ncias.",
            "N√£o tenho tido ningu√©m que me ou√ßa atentamente, que me compreenda ou que perceba os meus verdadeiros sentimentos e necessidades.",
            "Quando sinto que algu√©m de quem eu gosto se est√° a afastar de mim, sinto-me desesperado.",
            "Sou bastante desconfiado quanto √†s inten√ß√µes das outras pessoas.",
            "Sinto-me afastado(a) ou desligado dos outros.",
            "Sinto que nunca poderei ser amado por algu√©m.",
            "N√£o sou t√£o talentoso(a) no trabalho como a maioria das pessoas.",
            "N√£o se pode confiar no meu julgamento em situa√ß√µes do dia-a-dia.",
            "Preocupa-me poder perder todo o dinheiro que tenho e ficar muito pobre ou na mis√©ria.",
            "Sinto frequentemente que √© como se os meus pais vivessem atrav√©s de mim ‚Äì n√£o tenho uma vida pr√≥pria.",
            "Sempre deixei que os outros escolhessem por mim; por isso, n√£o sei realmente aquilo que quero para mim.",
            "Tenho sido sempre eu quem ouve os problemas dos outros.",
            "Controlo-me tanto que as pessoas pensam que n√£o tenho sentimentos ou que tenho um cora√ß√£o de pedra.",
            "Sinto sobre mim uma press√£o constante para fazer coisas e atingir objetivos.",
            "Sinto que n√£o devia ter que seguir as regras e conven√ß√µes habituais que as outras pessoas t√™m que seguir.",
            "N√£o me consigo obrigar a fazer coisas de que n√£o gosto, mesmo quando sei que √© para o meu bem.",
            "Quando fa√ßo uma interven√ß√£o numa reuni√£o ou quando sou apresentado a algu√©m num grupo, √© importante para mim obter reconhecimento e admira√ß√£o.",
            "Por muito que trabalhe, preocupa-me poder ficar na mis√©ria e perder quase tudo o que possuo.",
            "N√£o interessa porque √© que cometi um erro; quando fa√ßo algo errado, h√° que pagar as consequ√™ncias.",
            "N√£o tenho tido uma pessoa forte ou sensata para me dar bons conselhos e me dizer o que fazer quando n√£o tenho a certeza da atitude que devo tomar.",
            "Por vezes, a preocupa√ß√£o que tenho com o facto de as pessoas me poderem deixar √© t√£o grande, que acabo por as afastar.",
            "Estou habitualmente √† procura de segundas inten√ß√µes ou do verdadeiro motivo por detr√°s do comportamento dos outros.",
            "Em grupo, sinto sempre que estou de fora.",
            "Sou demasiado inaceit√°vel para me poder mostrar tal como sou √†s outras pessoas ou para deixar que me conhe√ßam bem.",
            "No que diz respeito ao trabalho (ou √† escola) n√£o sou t√£o inteligente como a maior parte das pessoas.",
            "N√£o tenho confian√ßa nas minhas capacidades para resolver problemas que surjam no dia-a-dia.",
            "Preocupa-me poder estar a desenvolver uma doen√ßa grave, ainda que n√£o tenha sido diagnosticado nada de grave pelo m√©dico.",
            "Sinto frequentemente que n√£o tenho uma identidade separada da dos meus pais ou companheiro(a).",
            "Tenho imenso trabalho para conseguir que os meus sentimentos sejam tidos em considera√ß√£o e os meus direitos sejam respeitados.",
            "As outras pessoas consideram que fa√ßo muito pelos outros e n√£o fa√ßo o suficiente por mim.",
            "As pessoas acham que tenho dificuldade em exprimir o que sinto.",
            "N√£o posso descuidar as minhas obriga√ß√µes de forma leviana, nem desculpar-me pelos meus erros.",
            "Sinto que o que tenho para oferecer tem mais valor do que aquilo que os outros t√™m para dar.",
            "Raramente tenho sido capaz de levar as minhas decis√µes at√© ao fim.",
            "Receber muitos elogios dos outros faz-me sentir uma pessoa que tem valor.",
            "Preocupa-me que uma decis√£o errada possa provocar uma cat√°strofe.",
            "Sou uma pessoa m√° que merece ser castigada."
        ];

        // NOMES DOS ESQUEMAS (Ordem C√≠clica 1-18)
        const schemaNames = [
            "Priva√ß√£o Emocional", "Abandono/Instabilidade", "Desconfian√ßa/Abuso", "Isolamento Social", "Defectividade/Vergonha",
            "Fracasso", "Depend√™ncia/Incompet√™ncia", "Vulnerabilidade ao Dano", "Emaranhamento",
            "Subjuga√ß√£o", "Auto-sacrif√≠cio", "Inibi√ß√£o Emocional",
            "Padr√µes Inflex√≠veis", "Arrogo/Grandiosidade", "Autocontrole Insuficiente",
            "Busca de Aprova√ß√£o", "Negativismo/Pessimismo", "Postura Punitiva"
        ];

        const container = document.getElementById('questions-container');

        // GERAR PERGUNTAS NA TELA
        questionsList.forEach((text, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            
            // Bot√µes de 1 a 6
            let buttonsHTML = '';
            for(let i=1; i<=6; i++) {
                buttonsHTML += `<div class="scale-btn" onclick="selectOption(${index}, ${i}, this)">${i}</div>`;
            }

            card.innerHTML = `
                <div class="q-number">${index + 1}</div>
                <div class="q-text">${text}</div>
                <div class="scale-container">
                    ${buttonsHTML}
                </div>
                <input type="hidden" id="answer-${index}" value="0">
            `;
            container.appendChild(card);
        });

        // SELE√á√ÉO VISUAL
        function selectOption(qIndex, value, btnElement) {
            document.getElementById(`answer-${qIndex}`).value = value;
            
            const parent = btnElement.parentNode;
            parent.querySelectorAll('.scale-btn').forEach(b => b.classList.remove('selected'));
            btnElement.classList.add('selected');
        }

        // CALCULAR RESULTADOS
        function calculateResults() {
            // 18 Esquemas, somas iniciam em 0
            let scores = new Array(18).fill(0);
            let answeredCount = 0;

            // Percorre as 90 perguntas
            for(let i=0; i<90; i++) {
                const val = parseInt(document.getElementById(`answer-${i}`).value);
                if(val > 0) {
                    answeredCount++;
                    // L√≥gica C√≠clica: Pergunta 1 √© Esquema 0, Pergunta 19 √© Esquema 0, etc.
                    const schemaIndex = i % 18;
                    scores[schemaIndex] += val;
                }
            }

            if(answeredCount < 90) {
                if(!confirm(`Voc√™ respondeu apenas ${answeredCount} de 90 perguntas. O resultado pode ser impreciso. Deseja continuar?`)) return;
            }

            // Renderizar Gr√°fico
            const chartArea = document.getElementById('charts-container');
            chartArea.innerHTML = '';

            scores.forEach((score, index) => {
                // Pontua√ß√£o M√°xima por esquema = 30 (5 perguntas * 6 pontos)
                const percent = (score / 30) * 100;
                
                // Crit√©rio visual: Consideramos "Alto" se pontua√ß√£o > 15 (aprox m√©dia 3)
                // Isso √© apenas visual, a interpreta√ß√£o cl√≠nica √© do psic√≥logo.
                const isHigh = score >= 15;

                const row = document.createElement('div');
                row.className = `schema-row ${isHigh ? 'high-score' : ''}`;
                
                row.innerHTML = `
                    <div class="schema-header">
                        <span>${schemaNames[index]}</span>
                        <span>${score} pts</span>
                    </div>
                    <div class="progress-bg">
                        <div class="progress-bar" style="width: ${percent}%"></div>
                    </div>
                `;
                chartArea.appendChild(row);
            });

            document.getElementById('result-area').style.display = 'block';
            document.getElementById('result-area').scrollIntoView({ behavior: 'smooth' });
        }
    </script>

</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Visitante (Versão Imagens) | TCC Animada</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-body: #2d3436;
            --stage-width: 900px;
            --stage-height: 500px;
            --primary: #6c5ce7;
        }

        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 0; font-family: 'Nunito', sans-serif;
            background: var(--bg-body); display: flex; justify-content: center; align-items: center;
            min-height: 100vh;
        }

        #app-container {
            width: var(--stage-width);
            height: 650px; /* 500px palco + 150px diálogo */
            background: #fff;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            display: flex; flex-direction: column;
        }

        /* --- 1. O PALCO --- */
        #stage {
            width: 100%; height: 500px;
            position: relative; overflow: hidden;
            background: #000; /* Fundo preto caso imagem falhe */
        }

        /* Camadas de Fundo */
        .bg-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; transition: opacity 1s ease;
        }
        #bg-office { opacity: 1; z-index: 1; }
        #bg-rooftop { opacity: 0; z-index: 2; }

        /* Camada de Personagens */
        .char-img {
            position: absolute; bottom: -20px; /* Levemente para fora para cortar os pés se necessário */
            height: 300px; /* Tamanho padrão */
            width: auto;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.3));
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
        }

        /* Posicionamento Inicial */
        #host { left: 150px; z-index: 10; }
        #visitor { 
            right: -300px; /* Começa fora da tela */
            z-index: 11; 
        }

        /* Animações de Estado do Visitante */
        .visitor-enter { right: 150px !important; }
        
        .visitor-angry-anim { 
            transform: scale(1.3) translateY(-20px); 
            filter: drop-shadow(0 0 20px rgba(255, 0, 0, 0.6)) !important;
        }
        
        .visitor-sad-anim { 
            transform: scale(0.85); 
            filter: grayscale(0.5) !important; 
        }

        .visitor-gone { 
            opacity: 0; 
            transform: translateY(-50px) scale(0.5); 
        }

        /* Posicionamento no Terraço (Opcional, se quiser mover os personagens) */
        .rooftop-pos-host { left: 250px !important; }
        .rooftop-pos-visitor { right: 250px !important; }

        /* Animação Idle (Respiração) */
        .idle { animation: breathe 3s infinite ease-in-out; }
        @keyframes breathe { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(1.02); } }

        /* Efeito de Tremor */
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }


        /* --- 2. O DIÁLOGO --- */
        #dialogue-section {
            flex: 1;
            background: #fff;
            border-top: 4px solid var(--primary);
            padding: 20px 40px;
            display: flex; align-items: center; gap: 20px;
            position: relative; z-index: 20;
        }

        .avatar-box {
            width: 80px; height: 80px; border-radius: 50%;
            border: 3px solid var(--primary); overflow: hidden;
            background: #eee; flex-shrink: 0;
        }
        .avatar-box img { width: 100%; height: 100%; object-fit: cover; }

        .text-content { flex: 1; }
        .speaker-label {
            font-size: 0.9rem; font-weight: 900; text-transform: uppercase;
            color: #b2bec3; margin-bottom: 5px; display: block;
        }
        .dialogue-line {
            font-size: 1.3rem; font-weight: 700; color: #2d3436; line-height: 1.4;
        }

        .next-btn {
            background: var(--primary); color: white; border: none;
            width: 60px; height: 60px; border-radius: 50%;
            cursor: pointer; font-size: 1.5rem; transition: 0.2s;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
        }
        .next-btn:hover { transform: scale(1.1); background: #5649c0; }

        /* TELA FINAL */
        #final-overlay {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.9); z-index: 100;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; opacity: 0; pointer-events: none; transition: 1s;
        }
        .show-final { opacity: 1 !important; pointer-events: auto !important; }

        /* PLACEHOLDER ALERTA (Caso a imagem não carregue) */
        img:not([src]) { visibility: hidden; }
        /* Estilo simples caso a imagem quebre */
        img[alt]:after {  
            content: attr(alt); display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #ccc; color: red;
        }

    </style>
</head>
<body>

<div id="app-container">
    
    <div id="stage">
        <img src="bg-escritorio.jpg" class="bg-layer" id="bg-office" alt="Cenário Escritório">
        <img src="bg-terraco.jpg" class="bg-layer" id="bg-rooftop" alt="Cenário Terraço">

        <img src="hospedeiro.png" class="char-img idle" id="host" alt="Hospedeiro">
        <img src="visitante-normal.png" class="char-img idle" id="visitor" alt="Visitante">

        <div id="final-overlay">
            <h1 style="font-size:3rem; margin-bottom:10px;">Fim.</h1>
            <p style="font-size:1.5rem; color:#dfe6e9;">"Você não é seus pensamentos."</p>
            <button class="next-btn" style="width:auto; padding:0 30px; margin-top:30px; border-radius:30px;" onclick="location.reload()">Reassistir</button>
        </div>
    </div>

    <div id="dialogue-section">
        <div class="avatar-box">
            <img src="hospedeiro.png" id="ui-avatar" style="object-position: top center;"> 
        </div>
        <div class="text-content">
            <span class="speaker-label" id="ui-label">Narrador</span>
            <div class="dialogue-line" id="ui-text">Certifique-se de que as imagens estão na pasta correta e clique na seta.</div>
        </div>
        <button class="next-btn" onclick="nextScene()"><i class="fa-solid fa-arrow-right"></i></button>
    </div>

</div>

<script>
    // Referências
    const bgOffice = document.getElementById('bg-office');
    const bgRooftop = document.getElementById('bg-rooftop');
    const host = document.getElementById('host');
    const visitor = document.getElementById('visitor');
    const app = document.getElementById('app-container');

    const uiLabel = document.getElementById('ui-label');
    const uiText = document.getElementById('ui-text');
    const uiAvatar = document.getElementById('ui-avatar');

    // Nomes dos arquivos (para facilitar a troca dinâmica)
    const IMG_HOST = "hospedeiro.png";
    const IMG_VISITOR_NORMAL = "visitante-normal.png";
    const IMG_VISITOR_ANGRY = "visitante-bravo.png";
    const IMG_VISITOR_SAD = "visitante-triste.png";

    let step = -1;

    const script = [
        {
            label: "Narrador", text: "Imagine que sua mente é este escritório. Você está focado, cuidando da sua vida...",
            act: () => {
                uiAvatar.src = IMG_HOST; // Mostra rosto do host
            }
        },
        {
            label: "Narrador", text: "De repente... UM GRITO NA SALA DE ESPERA! [Tremor]",
            act: () => {
                app.classList.add('shake');
                setTimeout(() => app.classList.remove('shake'), 500);
            }
        },
        {
            label: "Visitante", text: "ABRE ISSO! É UMA EMERGÊNCIA!",
            act: () => {
                // Entra o visitante
                visitor.classList.add('visitor-enter');
                uiAvatar.src = IMG_VISITOR_NORMAL;
            }
        },
        {
            label: "Hospedeiro", text: "Mas... eu não marquei hora. Quem é você?",
            act: () => {
                uiAvatar.src = IMG_HOST;
            }
        },
        {
            label: "Visitante", text: "Eu sou o PENSAMENTO INTRUSIVO! Olhe como eu sou assustador!",
            act: () => {
                // Troca imagem para BRAVO
                visitor.src = IMG_VISITOR_ANGRY;
                visitor.classList.add('visitor-angry-anim'); // Classe para aumentar tamanho
                uiAvatar.src = IMG_VISITOR_ANGRY;
            }
        },
        {
            label: "Narrador", text: "Antigamente, eu tentava brigar com ele. Mas ele só ficava maior e mais vermelho.",
            act: () => {
                // Mantém estado bravo
            }
        },
        {
            label: "Hospedeiro", text: "Sabe de uma coisa? Eu tenho que ver o pôr do sol. Você pode vir, se quiser.",
            act: () => {
                // Acalma o visitante
                visitor.src = IMG_VISITOR_NORMAL;
                visitor.classList.remove('visitor-angry-anim');
                uiAvatar.src = IMG_HOST;
            }
        },
        {
            label: "Visitante", text: "Hã? Mas... você não vai discutir comigo? Não vai pedir provas?",
            act: () => {
                uiAvatar.src = IMG_VISITOR_NORMAL;
            }
        },
        {
            label: "Narrador", text: "Eles sobem para o terraço da mente.",
            act: () => {
                // Fade Out escritório, Fade In Terraço
                bgOffice.style.opacity = 0;
                bgRooftop.style.opacity = 1;
                
                // Opcional: Ajustar posições se o terraço pedir
                host.classList.add('rooftop-pos-host');
                visitor.classList.add('rooftop-pos-visitor');
            }
        },
        {
            label: "Visitante", text: "Ei! Olha essa altura! É perigoso! Vamos cair!",
            act: () => {
                // Tremidinha no visitante
                visitor.style.transform = "translateX(5px)";
                setTimeout(() => visitor.style.transform = "translateX(0)", 100);
                uiAvatar.src = IMG_VISITOR_NORMAL;
            }
        },
        {
            label: "Hospedeiro", text: "A vista é linda, não é? (Focando no momento presente)",
            act: () => {
                uiAvatar.src = IMG_HOST;
            }
        },
        {
            label: "Visitante", text: "É... bom... se você não vai brigar comigo... eu vou indo.",
            act: () => {
                // Troca para TRISTE/MURCHO
                visitor.src = IMG_VISITOR_SAD;
                visitor.classList.add('visitor-sad-anim');
                uiAvatar.src = IMG_VISITOR_SAD;
            }
        },
        {
            label: "Narrador", text: "E assim ele se foi. Pensamentos são apenas visitantes.",
            act: () => {
                visitor.classList.add('visitor-gone'); // Desaparece
                setTimeout(() => {
                    document.getElementById('final-overlay').classList.add('show-final');
                }, 1500);
            }
        }
    ];

    function nextScene() {
        step++;
        if(step < script.length) {
            const s = script[step];
            
            // Atualiza textos
            uiLabel.innerText = s.label;
            uiText.innerText = s.text;
            
            // Cores dos nomes
            if(s.label === "Hospedeiro") uiLabel.style.color = "#0984e3";
            else if(s.label === "Visitante") uiLabel.style.color = "#d63031";
            else uiLabel.style.color = "#b2bec3";

            // Executa a ação da cena
            if(s.act) s.act();
        }
    }

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUATI - Avaliação Tipológica | Bruno de Souza</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root {
            /* Identidade Visual */
            --bg-color: #f0f8ff;
            --primary: #6c5ce7;       /* Roxo (Tema Personalidade/Jung) */
            --primary-dark: #5b4cc4;
            --secondary: #a29bfe;     /* Lilás */
            --accent: #fdcb6e;        /* Amarelo */
            --text: #2d3436;
            --card-border: #b2bec3;
            
            /* Botões de Navegação */
            --btn-prev: #b2bec3;
            --btn-next: #0984e3;
            --btn-finish: #00b894;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dfe6e9 2px, transparent 2px);
            background-size: 20px 20px;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- CABEÇALHO (Estilo Fita Adesiva) --- */
        header {
            text-align: center;
            margin: 20px auto 30px auto;
            background: white;
            padding: 30px 20px;
            border-radius: 25px;
            border: 3px dashed var(--primary);
            box-shadow: 8px 8px 0 rgba(0,0,0,0.05);
            position: relative;
            max-width: 800px;
            width: 100%;
        }

        header::before {
            content: ""; 
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%) rotate(-1deg);
            width: 140px; height: 35px; 
            background-color: rgba(108, 92, 231, 0.2); 
            border: 1px solid rgba(0,0,0,0.05); 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.2rem;
            color: var(--primary);
            text-transform: uppercase;
            margin: 0;
            font-weight: 800;
        }

        .subtitle { margin-top: 5px; color: #636e72; font-weight: 600; }

        /* --- CONTAINER --- */
        .container {
            width: 100%;
            max-width: 900px;
            margin-bottom: 80px;
        }

        /* --- DADOS PESSOAIS --- */
        .personal-data {
            background: white;
            padding: 25px;
            border-radius: 20px;
            border: 2px dashed var(--card-border);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.05);
        }

        .form-group label {
            display: block;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dfe6e9;
            border-radius: 12px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1rem;
            color: var(--text);
            background: #f8f9fa;
        }

        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            background: white;
            outline: none;
        }

        /* --- ÁREA DO TESTE (ABAS) --- */
        .situation-container { display: none; animation: fadeIn 0.4s ease-out; }
        .situation-container.active { display: block; }

        .situation-header {
            background: var(--secondary);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            margin-bottom: 0;
            text-align: center;
            border: 2px solid var(--primary);
            border-bottom: none;
        }

        .situation-title { font-size: 1.4rem; font-weight: 800; margin-bottom: 5px; }
        .situation-desc { font-size: 1rem; opacity: 0.9; }

        .questions-wrapper {
            background: white;
            padding: 25px;
            border-radius: 0 0 20px 20px;
            border: 2px solid var(--primary);
            border-top: none;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05);
        }

        /* --- PERGUNTAS --- */
        .question-box {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px dashed #eee;
        }
        .question-box:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }

        .q-text {
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text);
            font-size: 1.1rem;
            display: block;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
            color: #636e72;
        }

        .option-label:hover {
            background: #f0f3ff;
            border-color: #a29bfe;
        }

        /* Selecionado */
        .option-label:has(input:checked) {
            background: #eef2ff;
            border-color: var(--primary);
            color: var(--primary-dark);
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(108, 92, 231, 0.15);
        }

        input[type="radio"] { margin-right: 15px; transform: scale(1.3); accent-color: var(--primary); }

        /* --- NAVEGAÇÃO --- */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }

        .btn {
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            color: white;
            transition: transform 0.2s;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            flex: 1;
            max-width: 200px;
        }

        .btn:hover { transform: translateY(-3px); }
        .btn:active { transform: translateY(2px); box-shadow: none; }

        .btn-prev { background: var(--btn-prev); color: #555; }
        .btn-next { background: var(--btn-next); }
        .btn-finish { background: var(--btn-finish); }

        /* --- RESULTADOS --- */
        #results-screen { display: none; margin-top: 40px; }

        .result-card {
            background: white;
            border: 3px dashed var(--primary);
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        }

        .type-code { font-size: 4rem; font-weight: 900; color: var(--primary); letter-spacing: 3px; line-height: 1; margin: 10px 0; }
        .type-name { font-size: 1.5rem; font-weight: 700; color: #2d3436; margin-bottom: 20px; }
        .type-desc { text-align: left; line-height: 1.6; color: #555; white-space: pre-line; background: #f8f9fa; padding: 20px; border-radius: 15px; }

        .score-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            font-size: 0.9rem;
        }
        .score-table th { background: var(--primary); color: white; padding: 12px; border-radius: 10px 10px 0 0; }
        .score-table td { border: 1px solid #eee; padding: 10px; text-align: center; color: #555; }
        .score-table tr:last-child td { border-bottom: 2px solid var(--primary); }

        /* Botão Voltar */
        .btn-back {
            display: block; margin-top: 30px; text-align: center; color: #b2bec3; text-decoration: none; font-weight: 600;
        }
        .btn-back:hover { color: var(--primary); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 600px) {
            .nav-buttons { flex-direction: column-reverse; align-items: stretch; }
            .btn { max-width: 100%; }
            .type-code { font-size: 3rem; }
        }
    </style>
</head>
<body>

    <header data-aos="fade-down">
        <h1>QUATI</h1>
        <div class="subtitle">Avaliação Tipológica (Personalidade)</div>
    </header>

    <div class="container">

        <div class="personal-data" id="personal-data" data-aos="fade-up">
            <div class="form-group">
                <label>Nome:</label>
                <input type="text" id="nome" placeholder="Seu nome">
            </div>
            <div class="form-group">
                <label>Idade:</label>
                <input type="number" id="idade" placeholder="Anos">
            </div>
            <div class="form-group">
                <label>Escolaridade:</label>
                <select id="escolaridade">
                    <option value="">Selecione...</option>
                    <option value="fundamental">Ensino Fundamental</option>
                    <option value="medio">Ensino Médio</option>
                    <option value="superior">Ensino Superior</option>
                </select>
            </div>
        </div>

        <form id="quati-form">
            <div id="quiz-container"></div>
            
            <div class="nav-buttons">
                <button type="button" class="btn btn-prev" id="btn-prev" onclick="changePage(-1)" style="display:none">
                    <i class="fa-solid fa-arrow-left"></i> Voltar
                </button>
                <button type="button" class="btn btn-next" id="btn-next" onclick="changePage(1)">
                    Próximo <i class="fa-solid fa-arrow-right"></i>
                </button>
                <button type="button" class="btn btn-finish" id="btn-finish" onclick="calculateResults()" style="display:none">
                    <i class="fa-solid fa-check"></i> Finalizar
                </button>
            </div>
        </form>

        <div id="results-screen">
            <div class="result-card">
                <div style="font-size:0.9rem; text-transform:uppercase; color:#b2bec3; font-weight:700;">Seu Tipo Psicológico</div>
                <div class="type-code" id="res-code">---</div>
                <div class="type-name" id="res-name">---</div>
                
                <div class="type-desc" id="res-desc">...</div>

                <h3 style="margin-top:30px; color:var(--text);">Detalhamento</h3>
                <table class="score-table">
                    <thead>
                        <tr>
                            <th>Dimensão</th>
                            <th>A</th>
                            <th>B</th>
                            <th>Saldo</th>
                            <th>Resultado</th>
                        </tr>
                    </thead>
                    <tbody id="score-body"></tbody>
                </table>

                <button class="btn btn-next" style="margin-top:30px; width:100%; background:#2d3436;" onclick="window.print()">
                    <i class="fa-solid fa-print"></i> Salvar PDF
                </button>
            </div>
        </div>

        <center>
            <a href="../listaferramentas.html" class="btn-back"><i class="fa-solid fa-arrow-left"></i> Voltar para Ferramentas</a>
        </center>

    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        const sections = [
            {
                title: "Situação 1: A FESTA",
                desc: "Imagine que você está em uma festa...",
                questions: [
                    { t: "Você...", a: "aprecia todo este movimento.", b: "pensa que talvez fosse melhor ter ficado em casa.", type: "R1" },
                    { t: "Você...", a: "fica atento para oportunidades de contato que possam surgir.", b: "presta atenção especial na organização e nos detalhes da festa.", type: "R2" },
                    { t: "Você...", a: "procura conversar sobre suas ideias e opiniões.", b: "prefere conversar sobre o que as pessoas gostam e estão sentindo.", type: "R3" },
                    { t: "Você...", a: "presta atenção a tudo e em todos a sua volta.", b: "está mais voltado para seu possível incômodo pessoal.", type: "R1" },
                    { t: "Você...", a: "não fica reparando nos detalhes da festa.", b: "atenta especialmente para todos os detalhes e não os esquecerá.", type: "R2" },
                    { t: "Você...", a: "não hesita em questionar os pontos de vista dos convidados.", b: "procura não criticar os outros para não criar um clima desagradável.", type: "R3" },
                    { t: "Você...", a: "procura conversar com o maior número de pessoas possível.", b: "conversa com poucas pessoas.", type: "R1" },
                    { t: "Você...", a: "não se preocupa em aproveitar o conforto oferecido.", b: "aproveita, com prazer, o conforto do ambiente.", type: "R2" },
                    { t: "Você...", a: "expõe suas ideias de maneira clara para quem se aproximar.", b: "torna-se receptível e amigável com quem se aproxima.", type: "R3" },
                    { t: "Você...", a: "não liga para o fato de haver tantas pessoas desconhecidas.", b: "fica retraído por haver tantos desconhecidos.", type: "R1" },
                    { t: "Você...", a: "já está imaginando como poderia ser uma nova festa.", b: "pensa nos problemas práticos que ocorreram para se organizar esta festa.", type: "R2" },
                    { t: "Você...", a: "numa conversação pode discordar e reafirmará a sua ideia até o fim.", b: "concorda com os outros para não estragar a festa.", type: "R3" },
                    { t: "Você...", a: "quando recebeu o convite aceitou-o imediatamente.", b: "quando recebeu o convite pensou antes de aceitá-lo.", type: "R1" },
                    { t: "Você...", a: "não fica reparando no que os outros têm ou fazem.", b: "repara no comportamento não convencional dos outros.", type: "R2" },
                    { t: "Você...", a: "não se importa em criticar até mesmo o dono da festa.", b: "procura ressaltar os pontos positivos da festa.", type: "R3" }
                ]
            },
            {
                title: "Situação 2: O TRABALHO",
                desc: "Em um ambiente profissional...",
                questions: [
                    { t: "Você...", a: "fica atento para saber tudo o que se passa ao seu redor.", b: "concentra-se nas suas tarefas.", type: "R1" },
                    { t: "Você...", a: "aprecia participar de novas tarefas e projetos inovadores.", b: "gosta da rotina de trabalho e se apega a ela.", type: "R2" },
                    { t: "Você...", a: "acha mais importante as tarefas a serem feitas.", b: "acha mais importante as pessoas que trabalham com você.", type: "R3" },
                    { t: "Você...", a: "aprecia um ambiente movimentado.", b: "irrita-se quando a agitação dos outros não o deixa trabalhar.", type: "R1" },
                    { t: "Você...", a: "ao receber uma tarefa precisa compreendê-la por inteiro.", b: "ao receber uma tarefa precisa saber os passos necessários.", type: "R2" },
                    { t: "Você...", a: "critica objetivamente as ideias de seu superior.", b: "procura persuadir seu superior com muito tato.", type: "R3" },
                    { t: "Você...", a: "constantemente conversa com os que estão a sua volta.", b: "prefere trabalhar em silêncio.", type: "R1" },
                    { t: "Você...", a: "entusiasma-se com um novo projeto.", b: "preocupa-se mais com as tarefas presentes.", type: "R2" },
                    { t: "Você...", a: "não se preocupa com a vida pessoal dos colegas.", b: "preocupa-se com a vida pessoal dos colegas.", type: "R3" },
                    { t: "Você...", a: "prefere fazer mais de uma tarefa ao mesmo tempo.", b: "prefere fazer uma tarefa de cada vez.", type: "R1" },
                    { t: "Você...", a: "pensa em inovações e mudanças.", b: "pensa na praticidade e operacionalidade.", type: "R2" },
                    { t: "Você...", a: "é percebido como racional e imparcial.", b: "é percebido como afetuoso e pessoal.", type: "R3" },
                    { t: "Você...", a: "é muito expansivo com todos os colegas.", b: "é contido e retraído.", type: "R1" },
                    { t: "Você...", a: "sente-se melhor planejando algo novo.", b: "sente-se melhor executando uma tarefa determinada.", type: "R2" },
                    { t: "Você...", a: "é lógico e impessoal nas decisões.", b: "é sensível aos sentimentos dos colegas.", type: "R3" }
                ]
            },
            {
                title: "Situação 3: A VIAGEM",
                desc: "Em uma viagem de férias...",
                questions: [
                    { t: "Você...", a: "não pensou muito para escolher o lugar.", b: "ponderou uma série de informações antes de decidir.", type: "R1" },
                    { t: "Você...", a: "pode alterar o roteiro da viagem no meio do caminho.", b: "cumpre o mais possível o roteiro.", type: "R2" },
                    { t: "Você...", a: "tem interesse em conhecer os fatos do local.", b: "tem interesse em conhecer o estilo de vida das pessoas.", type: "R3" },
                    { t: "Você...", a: "organiza um roteiro para ver a maioria dos pontos.", b: "visita somente alguns pontos importantes.", type: "R1" },
                    { t: "Você...", a: "vive mais intensamente a expectativa.", b: "vive mais intensamente o momento.", type: "R2" },
                    { t: "Você...", a: "interessado nos conteúdos que irá aprender.", b: "interessado nas emoções que irá sentir.", type: "R3" },
                    { t: "Você...", a: "prefere viajar em grupo grande.", b: "prefere viajar em pequeno grupo.", type: "R1" },
                    { t: "Você...", a: "motivado no planejamento.", b: "motivado quando a viagem inicia.", type: "R2" },
                    { t: "Você...", a: "organiza o roteiro de maneira lógica.", b: "organiza tomando por base o que gosta.", type: "R3" },
                    { t: "Você...", a: "não se demora nos lugares.", b: "detém-se em lugar de interesse.", type: "R1" },
                    { t: "Você...", a: "tende a ser desorganizado com horários.", b: "é organizado e prático.", type: "R2" },
                    { t: "Você...", a: "expressa opiniões sem se preocupar com o clima.", b: "procura manter um clima harmonioso.", type: "R3" },
                    { t: "Você...", a: "interessado em atividades físicas/esportivas.", b: "interessado em caminhadas tranquilas.", type: "R1" },
                    { t: "Você...", a: "prefere divagar pensando na próxima viagem.", b: "prefere aproveitar o conforto de agora.", type: "R2" },
                    { t: "Você...", a: "retorna com a sequência de fatos ordenada.", b: "retorna com lembranças afetivas.", type: "R3" }
                ]
            },
            {
                title: "Situação 4: O ESTUDO",
                desc: "Em uma sala de aula...",
                questions: [
                    { t: "Você...", a: "tende a conversar constantemente.", b: "tende a ficar atento e concentrado.", type: "R1" },
                    { t: "Você...", a: "aprecia trabalhos criativos.", b: "aprecia trabalhos práticos.", type: "R2" },
                    { t: "Você...", a: "sente-se à vontade com ciências exatas.", b: "sente-se à vontade com ciências humanas.", type: "R3" },
                    { t: "Você...", a: "sente dificuldade para concentrar-se muito tempo.", b: "sente facilidade para manter a atenção.", type: "R1" },
                    { t: "Você...", a: "prefere matérias teóricas.", b: "prefere matérias aplicadas.", type: "R2" },
                    { t: "Você...", a: "precisa compreender a lógica da matéria.", b: "precisa desenvolver afeto pelo professor.", type: "R3" },
                    { t: "Você...", a: "procura se entrosar com o maior número de colegas.", b: "prefere pequeno grupo de amigos.", type: "R1" },
                    { t: "Você...", a: "não tem paciência para repetir exercícios.", b: "é paciente a ponto de repetir exercícios.", type: "R2" },
                    { t: "Você...", a: "é capaz de discutir com o professor (lógica).", b: "evita expor ideias divergentes.", type: "R3" },
                    { t: "Você...", a: "sai melhor apresentando seminário.", b: "sai melhor redigindo resenha.", type: "R1" },
                    { t: "Você...", a: "prefere elaboração de pesquisa.", b: "prefere aplicação imediata.", type: "R2" },
                    { t: "Você...", a: "é mais questionador e crítico.", b: "é mais conciliador e pacificador.", type: "R3" },
                    { t: "Você...", a: "aprecia trabalhos em grupo.", b: "aprecia trabalhos individuais.", type: "R1" },
                    { t: "Você...", a: "procura novos conhecimentos teóricos.", b: "procura aplicar na prática.", type: "R2" },
                    { t: "Você...", a: "critica as ideias de seus colegas.", b: "critica seus colegas (pessoal).", type: "R3" }
                ]
            },
            {
                title: "Situação 5: LAZER",
                desc: "Em um final de semana livre...",
                questions: [
                    { t: "Você...", a: "prefere sair de casa.", b: "prefere ficar em casa.", type: "R1" },
                    { t: "Você...", a: "esperou com mil possibilidades.", b: "organizou o tempo para tarefas práticas.", type: "R2" },
                    { t: "Você...", a: "prefere tempo livre com tarefas (coisas).", b: "prefere tempo livre com pessoas.", type: "R3" },
                    { t: "Você...", a: "aceitaria um convite para sair imediatamente.", b: "prefere convidar para ficar em casa.", type: "R1" },
                    { t: "Você...", a: "realiza menos do que planejou.", b: "cumpre metas dentro do tempo.", type: "R2" },
                    { t: "Você...", a: "aprende sobre ciência e tecnologia.", b: "dedica-se aos amigos.", type: "R3" },
                    { t: "Você...", a: "passear ao ar livre/lojas.", b: "ficar em casa lendo.", type: "R1" },
                    { t: "Você...", a: "deixa a inspiração dizer o que fazer.", b: "faz coisas habituais.", type: "R2" },
                    { t: "Você...", a: "trocar ideias profissionais.", b: "saber como vai a vida dele.", type: "R3" },
                    { t: "Você...", a: "atividade em grupo.", b: "atividade sozinho.", type: "R1" },
                    { t: "Você...", a: "planejar atividades futuras.", b: "atividades de utilidade imediata.", type: "R2" },
                    { t: "Você...", a: "ir a uma palestra.", b: "participar de um bate-papo.", type: "R3" },
                    { t: "Você...", a: "filme de ação/aventura.", b: "filme existencial.", type: "R1" },
                    { t: "Você...", a: "inventa coisas para passar o tempo.", b: "segue roteiro do dia.", type: "R2" },
                    { t: "Você...", a: "recusaria convite explicando razões.", b: "teria dificuldade em recusar.", type: "R3" }
                ]
            },
            {
                title: "Situação 6: VIDA PESSOAL",
                desc: "Suas escolhas mais verdadeiras...",
                questions: [
                    { t: "Você é mais...", a: "comunicativo.", b: "observador.", type: "R1" },
                    { t: "Você é mais...", a: "teórico.", b: "prático.", type: "R2" },
                    { t: "Você é mais...", a: "racional.", b: "afetivo.", type: "R3" },
                    { t: "Você é mais...", a: "expansivo.", b: "reservado.", type: "R1" },
                    { t: "Você é mais...", a: "planejador.", b: "executor.", type: "R2" },
                    { t: "Você é mais...", a: "objetivo.", b: "simpático.", type: "R3" },
                    { t: "Você é mais...", a: "dinâmico.", b: "tranquilo.", type: "R1" },
                    { t: "Você é mais...", a: "inovador.", b: "tradicional.", type: "R2" },
                    { t: "Você é mais...", a: "verdadeiro, franco e direto.", b: "de por 'panos quentes'.", type: "R3" },
                    { t: "Você é mais...", a: "impulsivo.", b: "hesitante.", type: "R1" },
                    { t: "Você é mais...", a: "inventivo.", b: "rotineiro.", type: "R2" },
                    { t: "Você é mais...", a: "justo.", b: "misericordioso.", type: "R3" },
                    { t: "Você é mais...", a: "um aventureiro.", b: "um pesquisador.", type: "R1" },
                    { t: "Você é mais...", a: "improvisador.", b: "estrategista.", type: "R2" },
                    { t: "Você é mais...", a: "impessoal e lógico.", b: "pessoal e sentimental.", type: "R3" },
                    { t: "Você é mais...", a: "disperso.", b: "compenetrado.", type: "R1" },
                    { t: "Você é mais...", a: "imprevisível.", b: "previsível.", type: "R2" },
                    { t: "Você é mais...", a: "consistente e razoável nas ideias.", b: "profundo nos sentimentos.", type: "R3" }
                ]
            }
        ];

        // Descrições Resumidas
        const typeDescriptions = {
            "E St In": "Extrovertido / Sentimento / Intuição\n\nSociáveis, calorosos e entusiastas. Valorizam a harmonia e o contato humano.",
            "E In St": "Extrovertido / Intuição / Sentimento\n\nCriativos, inovadores e inspiradores. Gostam de novos projetos e detestam rotina.",
            "E Ps In": "Extrovertido / Pensamento / Intuição\n\nLíderes lógicos, estratégicos e diretos. Gostam de organizar e comandar.",
            "E In Ps": "Extrovertido / Intuição / Pensamento\n\nEmpreendedores, analíticos e inovadores. Buscam soluções inteligentes para problemas.",
            "E St Ss": "Extrovertido / Sentimento / Sensação\n\nAmistosos, prestativos e realistas. Gostam de ajudar e valorizam o bem-estar.",
            "E Ss St": "Extrovertido / Sensação / Sentimento\n\nEspontâneos, práticos e sociáveis. Vivem o momento e gostam de experiências.",
            "E Ps Ss": "Extrovertido / Pensamento / Sensação\n\nOrganizados, realistas e decididos. Focam em fatos e resultados concretos.",
            "E Ss Ps": "Extrovertido / Sensação / Pensamento\n\nPráticos, adaptáveis e solucionadores. Gostam de ação e resultados imediatos.",
            "I In St": "Introvertido / Intuição / Sentimento\n\nIdealistas, profundos e criativos. Buscam significado e conexão autêntica.",
            "I St In": "Introvertido / Sentimento / Intuição\n\nSensíveis, leais e compreensivos. Valorizam valores pessoais e harmonia.",
            "I In Ps": "Introvertido / Intuição / Pensamento\n\nTeóricos, independentes e analíticos. Gostam de ideias complexas e autonomia.",
            "I Ps In": "Introvertido / Pensamento / Intuição\n\nLógicos, reservados e intelectuais. Focam em sistemas e teorias.",
            "I Ss St": "Introvertido / Sensação / Sentimento\n\nObservadores, gentis e detalhistas. Valorizam a estética e o momento presente.",
            "I St Ss": "Introvertido / Sentimento / Sensação\n\nArtísticos, reservados e sensíveis. Expressam-se através de ações e não palavras.",
            "I Ss Ps": "Introvertido / Sensação / Pensamento\n\nAnalíticos, práticos e reservados. Gostam de entender como as coisas funcionam.",
            "I Ps Ss": "Introvertido / Pensamento / Sensação\n\nSistemáticos, lógicos e factuais. Valorizam a organização e a eficiência."
        };

        let currentSection = 0;
        let answers = { R1: {a:0, b:0}, R2: {a:0, b:0}, R3: {a:0, b:0} };

        function init() {
            const container = document.getElementById('quiz-container');
            
            sections.forEach((sec, sIndex) => {
                const div = document.createElement('div');
                div.className = 'situation-container';
                div.id = `sec-${sIndex}`;
                
                let questionsHTML = '';
                sec.questions.forEach((q, qIndex) => {
                    questionsHTML += `
                        <div class="question-box">
                            <span class="q-text">${qIndex + 1}. ${q.t}</span>
                            <label class="option-label">
                                <input type="radio" name="s${sIndex}_q${qIndex}" value="a" data-type="${q.type}">
                                ${q.a}
                            </label>
                            <label class="option-label">
                                <input type="radio" name="s${sIndex}_q${qIndex}" value="b" data-type="${q.type}">
                                ${q.b}
                            </label>
                        </div>
                    `;
                });

                div.innerHTML = `
                    <div class="situation-header">
                        <div class="situation-title">${sec.title}</div>
                        <div class="situation-desc">${sec.desc}</div>
                    </div>
                    <div class="questions-wrapper">
                        ${questionsHTML}
                    </div>
                `;
                container.appendChild(div);
            });

            showSection(0);
        }

        function showSection(index) {
            document.querySelectorAll('.situation-container').forEach(el => el.classList.remove('active'));
            document.getElementById(`sec-${index}`).classList.add('active');
            
            document.getElementById('btn-prev').style.display = index === 0 ? 'none' : 'block';
            
            if (index === sections.length - 1) {
                document.getElementById('btn-next').style.display = 'none';
                document.getElementById('btn-finish').style.display = 'block';
            } else {
                document.getElementById('btn-next').style.display = 'block';
                document.getElementById('btn-finish').style.display = 'none';
            }
            
            currentSection = index;
            window.scrollTo(0,0);
        }

        function changePage(dir) {
            showSection(currentSection + dir);
        }

        function calculateResults() {
            answers = { R1: {a:0, b:0}, R2: {a:0, b:0}, R3: {a:0, b:0} };
            
            const inputs = document.querySelectorAll('input[type="radio"]:checked');
            if(inputs.length < 93) {
                if(!confirm("Algumas questões não foram respondidas. O resultado pode ser impreciso. Deseja continuar?")) return;
            }

            inputs.forEach(input => {
                const type = input.getAttribute('data-type');
                const val = input.value;
                if(type) answers[type][val]++;
            });

            // Lógica
            const r1_val = answers.R1.a - answers.R1.b;
            const attitude = answers.R1.a >= answers.R1.b ? 'E' : 'I';

            const r2_val = answers.R2.a - answers.R2.b;
            const percept = answers.R2.a >= answers.R2.b ? 'In' : 'Ss';

            const r3_val = answers.R3.a - answers.R3.b;
            const judge = answers.R3.a >= answers.R3.b ? 'Ps' : 'St';

            let mainFunc, auxFunc;
            
            if (Math.max(answers.R2.a, answers.R2.b) >= Math.max(answers.R3.a, answers.R3.b)) {
                mainFunc = percept;
                auxFunc = judge;
            } else {
                mainFunc = judge;
                auxFunc = percept;
            }

            const finalCode = `${attitude} ${mainFunc} ${auxFunc}`;

            document.getElementById('quati-form').style.display = 'none';
            document.getElementById('personal-data').style.display = 'none';
            document.getElementById('results-screen').style.display = 'block';

            document.getElementById('res-code').innerText = finalCode;
            
            let desc = typeDescriptions[finalCode];
            if(!desc) {
                const altCode = `${attitude} ${auxFunc} ${mainFunc}`;
                desc = typeDescriptions[altCode] || "Perfil não encontrado no banco de dados resumido.";
            }
            
            const parts = desc.split('\n\n');
            document.getElementById('res-name').innerText = parts[0] || finalCode;
            document.getElementById('res-desc').innerText = parts[1] || desc;

            const tbody = document.getElementById('score-body');
            tbody.innerHTML = `
                <tr>
                    <td>R1 (Atitude)</td>
                    <td>${answers.R1.a} (E)</td>
                    <td>${answers.R1.b} (I)</td>
                    <td>${Math.abs(r1_val)}</td>
                    <td>${attitude === 'E' ? 'Extroversão' : 'Introversão'}</td>
                </tr>
                <tr>
                    <td>R2 (Percepção)</td>
                    <td>${answers.R2.a} (In)</td>
                    <td>${answers.R2.b} (Ss)</td>
                    <td>${Math.abs(r2_val)}</td>
                    <td>${percept === 'In' ? 'Intuição' : 'Sensação'}</td>
                </tr>
                <tr>
                    <td>R3 (Julgamento)</td>
                    <td>${answers.R3.a} (Ps)</td>
                    <td>${answers.R3.b} (St)</td>
                    <td>${Math.abs(r3_val)}</td>
                    <td>${judge === 'Ps' ? 'Pensamento' : 'Sentimento'}</td>
                </tr>
            `;
            
            window.scrollTo(0,0);
        }

        init();
    </script>

</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Reparentaliza√ß√£o</title>
    <style>
        :root {
            --purple-deep: #2c0e3a;
            --purple-light: #5d2e7a;
            --angel-color: #81ecec;
            --monster-color: #ff7675;
            --parent-color: #ffeaa7;
            --text-white: #ffffff;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            background-color: var(--purple-deep);
            background-image: radial-gradient(white 1px, transparent 1px), radial-gradient(white 1px, transparent 1px);
            background-size: 50px 50px;
            background-position: 0 0, 25px 25px;
            color: var(--text-white);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            text-align: center;
            text-shadow: 2px 2px 4px #000;
            margin-bottom: 10px;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            gap: 20px;
        }

        /* Placar */
        .scoreboard {
            display: flex;
            justify-content: space-around;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            border: 2px solid var(--purple-light);
        }

        .score-item {
            text-align: center;
        }

        .icon-star { color: gold; font-size: 1.5em; }
        .icon-diamond { color: cyan; font-size: 1.5em; }

        /* √Årea do Dado */
        .dice-area {
            margin: 20px 0;
        }

        button.roll-btn {
            background: linear-gradient(45deg, #ff9f43, #ee5253);
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 1.2em;
            color: white;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }

        button.roll-btn:hover {
            transform: scale(1.05);
        }

        button.roll-btn:disabled {
            background: #555;
            cursor: not-allowed;
        }

        /* √Årea das Cartas */
        .cards-area {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            min-height: 300px;
        }

        .card {
            width: 250px;
            min-height: 350px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            color: #333;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            animation: popIn 0.5s ease;
            position: relative;
        }

        @keyframes popIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .card-type {
            font-size: 0.9em;
            text-transform: uppercase;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            width: 100%;
        }

        .card.monster { border: 4px solid var(--monster-color); }
        .card.monster .card-type { background: var(--monster-color); color: white; }

        .card.angel { border: 4px solid var(--angel-color); }
        .card.angel .card-type { background: var(--angel-color); color: #000; }

        .card.parent { border: 4px solid var(--parent-color); }
        .card.parent .card-type { background: var(--parent-color); color: #000; }

        .card-content {
            font-size: 1.1em;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn {
            margin-top: 15px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: #2ecc71;
            color: white;
            cursor: pointer;
            font-weight: bold;
        }

        .hidden { display: none; }

        /* Mensagens */
        .message-box {
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            border: 1px solid white;
        }

    </style>
</head>
<body>

    <h1>Jogo da Reparentaliza√ß√£o üöÄ</h1>
    <p>Baseado no trabalho de Ingrid R. C. Alencar (2020)</p>

    <div class="game-container">
        
        <div class="scoreboard">
            <div class="score-item">
                <h3>Crian√ßa/Adolescente</h3>
                <div><span class="icon-star">‚òÖ</span> Selos Dourados: <span id="child-gold">0</span></div>
                <div><span class="icon-diamond">‚ô¶</span> Diamantes: <span id="child-diamond">0</span></div>
            </div>
            <div class="score-item">
                <h3>Pais/Cuidadores</h3>
                <div><span class="icon-star">‚òÖ</span> Selos Dourados: <span id="parent-gold">0</span></div>
                <div><span class="icon-diamond">‚ô¶</span> Diamantes: <span id="parent-diamond">0</span></div>
            </div>
        </div>

        <div class="dice-area">
            <button id="rollBtn" class="roll-btn" onclick="rollDice()">üé≤ Lan√ßar Dado</button>
            <div id="diceResult" class="message-box hidden"></div>
        </div>

        <div class="cards-area" id="cardsArea">
            </div>

    </div>

    <script>
        // --- BANCO DE DADOS DAS CARTAS (Baseado nas Tabelas 4 e 5 do PDF) ---
        
        // Cartas Anjo (Esquemas Adaptativos) - Tabela 4 [cite: 3535]
        const angelCards = [
            { id: 1, text: "Conte uma situa√ß√£o em que voc√™ acredita ter se sa√≠do muito bem em algo que voc√™ fez porque mudou sua forma de pensar.", theme: "Padr√µes Realistas" },
            { id: 2, text: "Conte um momento em que voc√™ se sentiu compreendido e aceito numa reuni√£o de fam√≠lia ou com amigos.", theme: "Pertencimento Social" },
            { id: 3, text: "Conte uma situa√ß√£o na qual voc√™ confiou em algu√©m para contar algo sobre voc√™.", theme: "Confian√ßa" },
            { id: 4, text: "Conte um momento em que voc√™ sentiu que podia contar com uma pessoa amiga.", theme: "Apego Seguro" },
            { id: 5, text: "Conte uma situa√ß√£o em que voc√™ percebeu que daria conta de fazer algo importante sozinho.", theme: "Compet√™ncia" },
            { id: 8, text: "Conte uma situa√ß√£o em que voc√™ falou sobre algo que gosta e se sentiu muito bem com isso.", theme: "Assertividade" },
            { id: 9, text: "Conte uma situa√ß√£o em que voc√™ se sentiu capaz e orgulhoso de sua atitude.", theme: "Autoaceita√ß√£o" }
        ];

        // Cartas Monstro (Esquemas Desadaptativos) - Tabela 5 [cite: 3572]
        const monsterCards = [
            { id: 1, text: "Conte uma situa√ß√£o em que voc√™ quis ser melhor que os outros porque suas regras est√£o sempre certas.", theme: "Padr√µes Inflex√≠veis" },
            { id: 2, text: "Conte uma situa√ß√£o que voc√™ se sentiu incompreendido e sozinho.", theme: "Isolamento Social" },
            { id: 3, text: "Conte uma situa√ß√£o na qual voc√™ sentiu-se magoado por algu√©m.", theme: "Desconfian√ßa/Abuso" },
            { id: 4, text: "Conte uma situa√ß√£o em que voc√™ sentiu que n√£o poderia contar com as pessoas e sentiu-se abandonado.", theme: "Abandono" },
            { id: 5, text: "Conte uma situa√ß√£o em que voc√™ sentiu que dependia de uma pessoa mais capaz para dar conta de uma tarefa sua.", theme: "Depend√™ncia" },
            { id: 8, text: "Conte uma situa√ß√£o em que voc√™ s√≥ se importou com os desejos dos outros e n√£o com os seus.", theme: "Subjuga√ß√£o" },
            { id: 9, text: "Conte uma situa√ß√£o que voc√™ se sentiu envergonhado ou esquisito.", theme: "Defectividade/Vergonha" }
        ];

        // Cartas Pais (Reparentaliza√ß√£o) - Tabela 5 (correspondente ao Monstro) [cite: 3610]
        const parentCards = [
            { id: 1, text: "Demonstre para seu filho como voc√™ o aceita como ele √©. D√™ dois exemplos. Demonstre sinceridade!", goal: "Flexibiliza√ß√£o de padr√µes" },
            { id: 2, text: "Diga para seu filho uma situa√ß√£o na qual voc√™ procurou entend√™-lo e integr√°-lo √† fam√≠lia. Seja afetuoso!", goal: "Aceita√ß√£o e Inclus√£o" },
            { id: 3, text: "D√™ exemplos para seu filho de situa√ß√µes e pessoas nas quais se pode confiar.", goal: "Fornecer Confian√ßa" },
            { id: 4, text: "D√™ exemplos para seu filho dos motivos pelos quais ele sempre pode contar com voc√™. Mostre firmeza!", goal: "Base Est√°vel" },
            { id: 5, text: "Elogie alguma compet√™ncia do seu filho e d√™ um exemplo de algo que ele faz de maneira independente.", goal: "Valorizar Independ√™ncia" },
            { id: 8, text: "D√™ exemplos para seu filho nos quais voc√™ ficou feliz porque ele(a) se deu valor e expressou opini√£o.", goal: "Express√£o de Necessidades" },
            { id: 9, text: "D√™ exemplo de coisas que voc√™ se orgulha em seu filho.", goal: "Aceita√ß√£o Amorosa" }
        ];

        // Estado do Jogo
        let childGold = 0;
        let childDiamond = 0;
        let parentGold = 0;
        let parentDiamond = 0;

        function rollDice() {
            const cardsArea = document.getElementById('cardsArea');
            cardsArea.innerHTML = ''; // Limpa mesa
            
            const resultBox = document.getElementById('diceResult');
            const roll = Math.random() < 0.5 ? 'ANJO' : 'MONSTRO'; // Dado 50/50
            
            resultBox.innerText = `O dado caiu em: ${roll}`;
            resultBox.classList.remove('hidden');

            if (roll === 'ANJO') {
                drawAngelCard();
            } else {
                drawMonsterCard();
            }
        }

        function drawAngelCard() {
            // Sorteia carta Anjo
            const card = angelCards[Math.floor(Math.random() * angelCards.length)];
            
            const cardHTML = `
                <div class="card angel">
                    <div class="card-type">Carta Anjo üëº</div>
                    <div class="card-content">${card.text}</div>
                    <small>Tema: ${card.theme}</small>
                    <button class="action-btn" onclick="completeTask('child')">Responder & Ganhar Selo</button>
                </div>
            `;
            document.getElementById('cardsArea').innerHTML = cardHTML;
        }

        function drawMonsterCard() {
            // Sorteia carta Monstro
            const cardIndex = Math.floor(Math.random() * monsterCards.length);
            const mCard = monsterCards[cardIndex];
            
            // Encontra a carta dos pais correspondente pelo ID 
            // "Todas as vezes que o filho pegar uma carta monstro o pai dever√° pegar a respectiva carta de reparentaliza√ß√£o"
            const pCard = parentCards.find(p => p.id === mCard.id);

            const cardsHTML = `
                <div class="card monster">
                    <div class="card-type">Carta Monstro üëæ</div>
                    <div class="card-content">${mCard.text}</div>
                    <small>Esquema: ${mCard.theme}</small>
                    <button class="action-btn" onclick="revealParentCard(${cardIndex})">Responder</button>
                </div>
            `;
            
            document.getElementById('cardsArea').innerHTML = cardsHTML;
        }

        function revealParentCard(index) {
            // Simula o filho respondendo, e ent√£o mostra a carta do pai
            const mCard = monsterCards[index];
            const pCard = parentCards.find(p => p.id === mCard.id);

            const parentCardHTML = `
                <div class="card parent">
                    <div class="card-type">Pais Cuidando üë™</div>
                    <div class="card-content">${pCard.text}</div>
                    <small>Objetivo: ${pCard.goal}</small>
                    <button class="action-btn" onclick="completeTask('both')">Realizar Reparentaliza√ß√£o</button>
                </div>
            `;

            // Mant√©m a carta do monstro e adiciona a do pai ao lado
            const currentHTML = document.getElementById('cardsArea').innerHTML;
            
            // Remove o bot√£o da carta monstro pois j√° foi clicado
            const updatedMonsterHTML = currentHTML.replace('onclick="revealParentCard', 'disabled style="background:#ccc" onclick="');
            
            document.getElementById('cardsArea').innerHTML = updatedMonsterHTML + parentCardHTML;
        }

        function completeTask(who) {
            if (who === 'child') {
                addGold('child');
                alert("Parab√©ns! Voc√™ respondeu e ganhou 1 Selo Dourado!");
            } else if (who === 'both') {
                addGold('child');
                addGold('parent');
                alert("Excelente! Reparentaliza√ß√£o realizada. Ambos ganham Selos Dourados!");
            }
            
            // Limpa a mesa para pr√≥xima rodada
            document.getElementById('cardsArea').innerHTML = '<div style="color:white; font-size:1.2em;">Clique em Lan√ßar Dado para continuar!</div>';
        }

        function addGold(player) {
            if (player === 'child') {
                childGold++;
                // Regra: Filhos trocam 2 selos dourados por 1 diamante 
                if (childGold >= 2) {
                    childGold -= 2;
                    childDiamond++;
                }
            } else {
                parentGold++;
                // Regra: Pais trocam 1 selo dourado por 1 diamante 
                if (parentGold >= 1) {
                    parentGold -= 1;
                    parentDiamond++;
                }
            }
            updateScoreboard();
        }

        function updateScoreboard() {
            document.getElementById('child-gold').innerText = childGold;
            document.getElementById('child-diamond').innerText = childDiamond;
            document.getElementById('parent-gold').innerText = parentGold;
            document.getElementById('parent-diamond').innerText = parentDiamond;
        }

    </script>
</body>
</html>
